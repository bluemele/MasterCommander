<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Master&amp;Commander &mdash; AI Boat Monitor for Charter Fleets &amp; Private Yachts</title>
  <meta name="description" content="AI boat monitoring for charter fleets, private yachts, deliveries, and marinas. Commander Unit connects to your marine electronics, monitors every system 24/7, and sends alerts to WhatsApp. From $499/year per boat.">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x2693;</text></svg>">
</head>
<body>

<!-- Nav -->
<nav>
  <div class="logo"><span>&#x2693;</span> Master<span>&amp;</span>Commander</div>
  <ul>
    <li><a href="#how-it-works">How It Works</a></li>
    <li><a href="#solutions">Solutions</a></li>
    <li><a href="#delivery-puck">Delivery Puck</a></li>
    <li><a href="#diagnostics">Diagnostics</a></li>
    <li><a href="#hardware">Hardware</a></li>
    <li><a href="#pricing">Pricing</a></li>
    <li><a href="#alerts">Alerts</a></li>
    <li><a href="#demo">Demo</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
</nav>

<!-- Hero -->
<section class="hero">
  <h1>Your fleet, <span class="highlight">always talking.</span></h1>
  <p class="tagline">AI boat monitoring for charter fleets and private yachts. The Commander Unit connects to your marine electronics, monitors every system 24/7, and reports to you via WhatsApp, app, or cloud dashboard.</p>
  <div class="cta-buttons" style="margin-bottom:2rem">
    <a href="#solutions" class="cta-btn">Charter Fleets</a>
    <a href="#solutions" class="cta-btn secondary">Private Yachts</a>
    <a href="#delivery-puck" class="cta-btn secondary">Delivery Captains</a>
    <a href="#diagnostics" class="cta-btn secondary">Marine Surveys</a>
  </div>
  <div class="badges">
    <span class="badge"><span class="dot"></span> 24/7 Monitoring</span>
    <span class="badge"><span class="dot"></span> Zero Config</span>
    <span class="badge"><span class="dot"></span> Real-Time Alerts</span>
    <span class="badge"><span class="dot"></span> AI-Powered</span>
  </div>
</section>

<!-- Social Proof Bar -->
<div class="proof-bar">
  <div class="proof-item">
    <div class="proof-number">78+</div>
    <div class="proof-label">Use Cases</div>
  </div>
  <div class="proof-item">
    <div class="proof-number">4</div>
    <div class="proof-label">Hardware Options</div>
  </div>
  <div class="proof-item">
    <div class="proof-number">24/7</div>
    <div class="proof-label">Monitoring</div>
  </div>
  <div class="proof-item">
    <div class="proof-number">60s</div>
    <div class="proof-label">Setup Time</div>
  </div>
</div>

<!-- System Architecture -->
<section class="flow-section" id="architecture">
  <h2>System Architecture</h2>
  <p class="subtitle">Tap any step to learn more. Data flows from your marine electronics to your phone.</p>
  <div class="flow-tabs">
    <button class="flow-tab-btn active" data-mode="charter" onclick="setFlowMode('charter')">Charter Fleet</button>
    <button class="flow-tab-btn" data-mode="private" onclick="setFlowMode('private')">Private Yacht</button>
    <button class="flow-tab-btn" data-mode="delivery" onclick="setFlowMode('delivery')">Delivery Captain</button>
    <button class="flow-tab-btn" data-mode="diagnostic" onclick="setFlowMode('diagnostic')">Diagnostic</button>
  </div>
  <div id="flow-container">
    <div id="flow-steps" class="flow-steps"></div>
    <div id="flow-outputs" class="flow-outputs"></div>
  </div>
  <div id="detail-panel" class="detail-panel">
    <button id="detail-close">&times;</button>
    <div class="detail-content">
      <div class="detail-info">
        <h3 id="detail-title"></h3>
        <p id="detail-desc"></p>
        <div id="detail-tags" class="detail-tags"></div>
      </div>
      <div id="detail-mockup" class="detail-mockup" style="display:none"></div>
    </div>
  </div>
</section>

<!-- How It Works -->
<section id="how-it-works">
  <div class="section-header">
    <h2>How It Works</h2>
    <p>We install it. It learns your boat. You get WhatsApp alerts.</p>
  </div>
  <div class="steps">
    <div class="step">
      <span class="step-number">01</span>
      <h3>Install the Commander Unit</h3>
      <p>A compact unit goes at your nav station and plugs into your NMEA 2000 network. Compatible with all major marine electronics &mdash; Garmin, Raymarine, Simrad, B&amp;G, Victron, and more.</p>
      <p style="margin-top:0.75rem">Professional installation. No wiring changes to your boat.</p>
    </div>
    <div class="step">
      <span class="step-number">02</span>
      <h3>It Discovers Your Boat</h3>
      <p>Commander auto-discovers every sensor on board. Twin engines? Two battery banks? Solar? Shore power? It figures out what you have and adapts automatically.</p>
      <p style="margin-top:0.75rem">No configuration needed. No device lists. It just learns.</p>
    </div>
    <div class="step">
      <span class="step-number">03</span>
      <h3>You Stay Connected</h3>
      <p>On board? Open the Commander App &mdash; no internet needed. Away with Starlink or WiFi? Get WhatsApp alerts. Add Master for the full cloud dashboard, push notifications, and historical analytics.</p>
      <p style="margin-top:0.75rem">Text <code>status</code> or tap the app anytime for a full report.</p>
    </div>
  </div>
</section>

<!-- Solutions -->
<section id="solutions">
  <div class="section-header">
    <h2>Solutions</h2>
    <p>78+ use cases across charter operations, private yacht ownership, marine professionals, deliveries, and marinas.</p>
  </div>

  <!-- Main tabs -->
  <div class="solutions-tabs">
    <button class="tab-btn active" data-tab="charter">Charter Fleets</button>
    <button class="tab-btn" data-tab="private">Private Yachts</button>
    <button class="tab-btn" data-tab="marinepros">Marine Pros</button>
  </div>

  <!-- CHARTER TAB -->
  <div class="tab-panel active" id="tab-charter">
    <div class="sub-pills">
      <button class="pill-btn active" data-pill="during-charter">During Charter (13)</button>
      <button class="pill-btn" data-pill="turnaround">Turnaround (6)</button>
      <button class="pill-btn" data-pill="fleet-dashboard">Fleet Management (9)</button>
    </div>

    <!-- During Charter -->
    <div class="pill-panel uc-grid active" id="pill-during-charter">
      <div class="uc-card">
        <div class="uc-icon">&#x1F50B;</div>
        <h4>Battery Drain Alert</h4>
        <p>Auto-alerts when house bank drops below threshold &mdash; guests never notice until it's too late.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F321;&#xFE0F;</div>
        <h4>Engine Overheat Warning</h4>
        <p>Coolant temp spikes trigger instant WhatsApp alerts before a novice skipper causes damage.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2693;</div>
        <h4>Anchor Drag Detection</h4>
        <p>GPS drift monitoring with configurable swing radius. Alert fires the moment anchor moves beyond safe zone.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F6B0;</div>
        <h4>Bilge Pump Monitoring</h4>
        <p>Track pump cycles per hour. Abnormal frequency = water ingress detected early, not at the dock.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26FD;</div>
        <h4>Fuel / Water Level Alerts</h4>
        <p>Low tank warnings prevent running dry mid-charter. Guests get gentle reminders before it's a problem.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F30A;</div>
        <h4>Shallow Water Warning</h4>
        <p>Depth sounder integration alerts before grounding. Configurable per-vessel draft settings.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CD;</div>
        <h4>Geofence Alerts</h4>
        <p>Set charter zone boundaries. Get notified if a boat leaves the permitted cruising area.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F6E2;&#xFE0F;</div>
        <h4>Oil Pressure Monitoring</h4>
        <p>Low oil pressure while running = immediate alert. Catch engine problems before they become engine replacements.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F32C;&#xFE0F;</div>
        <h4>Wind &amp; Weather Alerts</h4>
        <p>On-board wind speed and direction with threshold alerts for high wind conditions.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26A1;</div>
        <h4>Shore Power Disconnect</h4>
        <p>Detect when shore power is lost or disconnected &mdash; before batteries start draining.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2699;&#xFE0F;</div>
        <h4>Engine Hours Tracking</h4>
        <p>Real-time engine hours per charter. Know exactly how hard each boat was used.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4F7;</div>
        <h4>Security Camera Monitoring</h4>
        <p>On-board cameras with AI vision. Detect unauthorized boarding, unusual activity, or deck incidents.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4AC;</div>
        <h4>Guest Self-Service via WhatsApp</h4>
        <p>Charterers text "status" or "help" and get instant boat info &mdash; reduces base support calls.</p>
      </div>
    </div>

    <!-- Turnaround -->
    <div class="pill-panel uc-grid" id="pill-turnaround">
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CB;</div>
        <h4>Pre-Charter Checklist</h4>
        <p>Automated system check before each charter &mdash; batteries, tanks, engines, safety gear. One-tap readiness report.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F527;</div>
        <h4>Damage Detection</h4>
        <p>Compare system readings post-charter to pre-charter baseline. Flag anomalies for inspection.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26FD;</div>
        <h4>Tank Level Verification</h4>
        <p>Confirm fuel and water tanks are topped off before handover. No disputes about what was full or empty.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F50B;</div>
        <h4>Battery Health Report</h4>
        <p>Post-charter battery analysis: cycles, depth of discharge, charging patterns. Predict replacements before failures.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CA;</div>
        <h4>Charter Usage Summary</h4>
        <p>Automated report: engine hours run, fuel burned, miles traveled, max speed, systems used. Full charter audit trail.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2699;&#xFE0F;</div>
        <h4>Maintenance Flag System</h4>
        <p>Commander flags items needing attention based on real data &mdash; not guesswork. Prioritized by urgency.</p>
      </div>
    </div>

    <!-- Fleet Dashboard -->
    <div class="pill-panel uc-grid" id="pill-fleet-dashboard">
      <div class="uc-card">
        <div class="uc-icon">&#x1F5FA;&#xFE0F;</div>
        <h4>Live Fleet Map</h4>
        <p>See every boat on one map. Real-time positions, heading, speed. Click any vessel for full telemetry.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CA;</div>
        <h4>Cross-Fleet Analytics</h4>
        <p>Compare fuel consumption, battery health, engine hours, and maintenance costs across your entire fleet.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F6E0;&#xFE0F;</div>
        <h4>Maintenance Scheduling</h4>
        <p>Engine hours, oil changes, haul-out dates. Commander tracks the data, Master schedules the work.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4F1;</div>
        <h4>OTA Software Updates</h4>
        <p>Push firmware and config updates to your entire fleet remotely. No boat visits needed.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F514;</div>
        <h4>Centralized Alert Management</h4>
        <p>All fleet alerts in one stream. Filter by severity, boat, or type. Route critical alerts to the right team member.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4B0;</div>
        <h4>Cost-Per-Charter Tracking</h4>
        <p>Fuel, maintenance, and wear data per charter. Know your true cost per booking and optimize pricing.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4C8;</div>
        <h4>Fleet Health Score</h4>
        <p>Each boat gets an AI-generated health score based on all sensor data. Spot declining boats before breakdowns.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4E6;</div>
        <h4>Provisioning &amp; Onboarding</h4>
        <p>Add new boats to your fleet in minutes. Commander auto-discovers the vessel and syncs to your dashboard.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4C4;</div>
        <h4>Compliance Reporting</h4>
        <p>Automated logs for safety inspections, engine hours, and maintenance records. Export-ready for auditors.</p>
      </div>
    </div>
  </div>

  <!-- PRIVATE YACHT TAB -->
  <div class="tab-panel" id="tab-private">
    <div class="sub-pills">
      <button class="pill-btn active" data-pill="active-cruiser">Active Boating (11)</button>
      <button class="pill-btn" data-pill="boat-away">Away From Boat (9)</button>
    </div>

    <!-- Active Boating -->
    <div class="pill-panel uc-grid active" id="pill-active-cruiser">
      <div class="uc-card">
        <div class="uc-icon">&#x2693;</div>
        <h4>Anchor Watch</h4>
        <p>Set your swing radius &mdash; Commander monitors GPS drift continuously. Sleep soundly knowing you'll be woken if it drags.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F30A;</div>
        <h4>Depth Monitoring</h4>
        <p>Continuous depth tracking with configurable shallow water alerts. Essential for reef-strewn anchorages.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2699;&#xFE0F;</div>
        <h4>Engine Diagnostics</h4>
        <p>Coolant temp, oil pressure, RPM, alternator output. Commander knows your engine's normal &mdash; and alerts when it's not.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26FD;</div>
        <h4>Fuel Range Estimation</h4>
        <p>Real-time fuel burn rate + remaining fuel = estimated range at current speed. Plan passages confidently.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F32C;&#xFE0F;</div>
        <h4>Wind &amp; Weather</h4>
        <p>On-board wind instruments feed real-time data. Set threshold alerts for gusts or sustained wind changes.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F9ED;</div>
        <h4>Passage Log</h4>
        <p>Automatic logging of positions, speed, heading, wind, engine hours. Your passage record, built automatically.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F9E0;</div>
        <h4>AI Boat Assistant</h4>
        <p>Ask questions in plain English: "How's the engine running?" "Should I worry about this battery trend?" Local AI answers instantly.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4F1;</div>
        <h4>Commander App</h4>
        <p>Full real-time gauges, camera feeds, and controls via the on-board app. Works without internet over boat WiFi or Bluetooth.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F512;</div>
        <h4>Night Watch Mode</h4>
        <p>Enhanced monitoring while crew sleeps. Tighter alert thresholds, anchor watch active, AIS monitoring, depth alerts.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F6E0;&#xFE0F;</div>
        <h4>Maintenance Tracker</h4>
        <p>Engine hours, oil changes, impeller replacements. Commander reminds you when it's time, based on actual usage.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CA;</div>
        <h4>Historical Analytics</h4>
        <p>With Master: trend charts for battery health, fuel efficiency, engine performance. Your boat gets smarter over time.</p>
      </div>
    </div>

    <!-- Away From Boat -->
    <div class="pill-panel uc-grid" id="pill-boat-away">
      <div class="uc-card">
        <div class="uc-icon">&#x1F50B;</div>
        <h4>Battery Watch</h4>
        <p>Monitor house and start batteries while you're home. Get alerts before a dead bank means a dead weekend.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26A1;</div>
        <h4>Shore Power Monitor</h4>
        <p>Know instantly when shore power drops or disconnects at the marina. Batteries start draining &mdash; you'll know first.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F6B0;</div>
        <h4>Bilge Alarm</h4>
        <p>Bilge pump running more than usual? Commander catches water ingress early &mdash; even if you're 1,000 miles away.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F321;&#xFE0F;</div>
        <h4>Temperature &amp; Humidity</h4>
        <p>Monitor cabin conditions to prevent mold, mildew, or freeze damage. Seasonal storage peace of mind.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4F7;</div>
        <h4>Security Cameras</h4>
        <p>AI-powered intrusion detection. Get a photo and alert if someone boards your vessel unexpectedly.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2693;</div>
        <h4>Dock Line Stress</h4>
        <p>GPS drift + wind data detects when your boat is straining at the dock during storms.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2600;&#xFE0F;</div>
        <h4>Solar Performance</h4>
        <p>Track solar charge vs. consumption while at the marina. Know if panels are keeping up or need cleaning.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4AC;</div>
        <h4>WhatsApp Check-In</h4>
        <p>Text "status" anytime and get a full boat report. No app needed, no login, just a message.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CA;</div>
        <h4>Weekly Digest</h4>
        <p>Automated weekly summary: battery trends, power usage, bilge activity, any anomalies. Delivered to WhatsApp.</p>
      </div>
    </div>
  </div>

  <!-- MARINE PROS TAB -->
  <div class="tab-panel" id="tab-marinepros">
    <div class="sub-pills">
      <button class="pill-btn active" data-pill="diag-diagnostics">Diagnostics (5)</button>
      <button class="pill-btn" data-pill="diag-reports">Service Reports (5)</button>
      <button class="pill-btn" data-pill="diag-delivery">Delivery Captains (4)</button>
    </div>

    <!-- Diagnostics -->
    <div class="pill-panel uc-grid active" id="pill-diag-diagnostics">
      <div class="uc-card">
        <div class="uc-icon">&#x1F50D;</div>
        <h4>Network Scan</h4>
        <p>Full NMEA 2000 backbone discovery &mdash; every device, every address, every PGN. Map the boat's entire data network in 24 hours.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F50B;</div>
        <h4>Battery Analysis</h4>
        <p>Charging patterns, parasitic draw detection, state of health, depth of discharge cycles. Find the drain your customer can't explain.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x2699;&#xFE0F;</div>
        <h4>Engine Diagnostics</h4>
        <p>Engine hours, error codes, coolant trends, oil pressure patterns, alternator output. Full engine health report from NMEA data.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F321;&#xFE0F;</div>
        <h4>Sensor Audit</h4>
        <p>Identify out-of-spec readings, intermittent connections, and phantom sensors. Find the flaky transducer before your customer does.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26A0;&#xFE0F;</div>
        <h4>Anomaly Detection</h4>
        <p>AI compares readings against benchmarks for the boat class. Flags anything unusual &mdash; from voltage sags to temperature spikes.</p>
      </div>
    </div>

    <!-- Service Reports -->
    <div class="pill-panel uc-grid" id="pill-diag-reports">
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CB;</div>
        <h4>Pre-Arrival Scan</h4>
        <p>Drop the scanner on the boat before you visit. Know what tools and parts to bring before you drive to the marina.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4C8;</div>
        <h4>Maintenance History</h4>
        <p>48 hours of continuous data reveals patterns that a 30-minute sea trial never will. Intermittent faults, charging anomalies, slow leaks.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CA;</div>
        <h4>Comparison Benchmarks</h4>
        <p>How does this boat compare to others in its class? Battery health, fuel efficiency, engine hours vs. age. Data-driven context for your diagnosis.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4C4;</div>
        <h4>Compliance Documentation</h4>
        <p>Generate professional reports for insurance surveys, pre-purchase inspections, and annual certifications. Verified sensor data, not estimates.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F9ED;</div>
        <h4>Marine Survey Reports</h4>
        <p>Back up visual inspections with 48 hours of verified sensor data. Engine health, electrical system analysis, battery condition, and network topology &mdash; evidence-based assessments for pre-purchase, insurance, and condition surveys.</p>
      </div>
    </div>

    <!-- Delivery Captains -->
    <div class="pill-panel uc-grid" id="pill-diag-delivery">
      <div class="uc-card">
        <div class="uc-icon">&#x1F6A2;</div>
        <h4>Passage Monitoring</h4>
        <p>Real-time engine, battery, and bilge data throughout the delivery. Know the boat's condition at every waypoint &mdash; not just departure and arrival.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4CD;</div>
        <h4>Position Tracking</h4>
        <p>Live GPS tracking with automatic position reports. Boat owner sees exactly where their vessel is at all times during the delivery.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x1F4C4;</div>
        <h4>Delivery Report</h4>
        <p>Automated log of the entire passage &mdash; engine hours, fuel consumption, weather encountered, route taken. Professional handoff documentation.</p>
      </div>
      <div class="uc-card">
        <div class="uc-icon">&#x26A0;&#xFE0F;</div>
        <h4>Incident Alerts</h4>
        <p>Instant alerts to owner and captain if anything goes out of spec during transit. Bilge pumps, battery voltage, engine temps &mdash; caught in real time.</p>
      </div>
    </div>
  </div>
</section>

<!-- The Delivery Puck -->
<section id="delivery-puck">
  <div class="section-header">
    <h2>The Delivery Puck</h2>
    <p>Plug-and-play boat monitoring in 60 seconds. Internet required &mdash; Starlink, marina WiFi, or hotspot. Just plug in and go.</p>
  </div>

  <!-- Hardware Diagram -->
  <div class="puck-diagram-wrap">
    <svg viewBox="0 0 900 340" xmlns="http://www.w3.org/2000/svg" class="puck-diagram">
      <defs>
        <filter id="glow-orange"><feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="#f59e0b" flood-opacity="0.3"/></filter>
        <filter id="glow-cyan"><feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="#0ea5e9" flood-opacity="0.3"/></filter>
        <linearGradient id="case-grad" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#1e293b"/><stop offset="100%" stop-color="#111827"/></linearGradient>
      </defs>

      <!-- Waterproof Case outline -->
      <rect x="40" y="30" width="260" height="280" rx="16" fill="url(#case-grad)" stroke="#334155" stroke-width="2" filter="url(#glow-cyan)"/>
      <text x="170" y="22" text-anchor="middle" fill="#0ea5e9" font-size="12" font-family="monospace" font-weight="600">WATERPROOF CASE</text>

      <!-- Raspberry Pi 5 inside case -->
      <rect x="65" y="60" width="210" height="120" rx="8" fill="#0f172a" stroke="#22c55e" stroke-width="1.5"/>
      <text x="170" y="90" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700" font-family="system-ui">Raspberry Pi 5</text>
      <text x="170" y="110" text-anchor="middle" fill="#64748b" font-size="11" font-family="monospace">ARM Cortex-A76 &bull; 8GB RAM</text>
      <!-- GPIO pins visual -->
      <g transform="translate(80,130)">
        <rect x="0" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="8" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="16" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="24" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="32" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="40" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="48" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
        <rect x="56" y="0" width="4" height="10" rx="1" fill="#22c55e" opacity="0.6"/>
      </g>
      <!-- USB ports on Pi -->
      <rect x="245" y="75" width="24" height="14" rx="2" fill="none" stroke="#94a3b8" stroke-width="1"/>
      <rect x="245" y="95" width="24" height="14" rx="2" fill="none" stroke="#94a3b8" stroke-width="1"/>
      <text x="280" y="87" fill="#64748b" font-size="8" font-family="monospace">USB</text>
      <text x="280" y="107" fill="#64748b" font-size="8" font-family="monospace">USB</text>

      <!-- SignalK label inside case -->
      <rect x="90" y="200" width="160" height="34" rx="6" fill="rgba(14,74,47,0.3)" stroke="#10b981" stroke-width="1"/>
      <text x="170" y="222" text-anchor="middle" fill="#10b981" font-size="12" font-weight="600" font-family="system-ui">SignalK Server</text>
      <text x="170" y="250" text-anchor="middle" fill="#475569" font-size="10" font-family="monospace">pre-installed &bull; auto-start</text>

      <!-- USB-C power port on case -->
      <rect x="130" y="300" width="80" height="14" rx="4" fill="#0f172a" stroke="#f59e0b" stroke-width="1.5"/>
      <text x="170" y="311" text-anchor="middle" fill="#f59e0b" font-size="9" font-family="monospace" font-weight="600">USB-C POWER</text>

      <!-- Connection line: Case to Actisense -->
      <line x1="300" y1="120" x2="380" y2="120" stroke="#334155" stroke-width="2" stroke-dasharray="6 3"/>
      <polygon points="375,115 385,120 375,125" fill="#0ea5e9"/>
      <text x="340" y="110" text-anchor="middle" fill="#475569" font-size="9" font-family="monospace">USB</text>

      <!-- Actisense NGX-1 -->
      <rect x="390" y="60" width="200" height="120" rx="12" fill="#1a2332" stroke="#0ea5e9" stroke-width="1.5" filter="url(#glow-cyan)"/>
      <text x="490" y="95" text-anchor="middle" fill="#e2e8f0" font-size="14" font-weight="700" font-family="system-ui">Actisense NGX-1</text>
      <text x="490" y="115" text-anchor="middle" fill="#64748b" font-size="11" font-family="monospace">NMEA 2000 &rarr; USB</text>
      <!-- Connector indicators -->
      <circle cx="420" cy="150" r="8" fill="none" stroke="#0ea5e9" stroke-width="1.5"/>
      <text x="420" y="154" text-anchor="middle" fill="#0ea5e9" font-size="8" font-family="monospace">N</text>
      <circle cx="560" cy="150" r="8" fill="none" stroke="#94a3b8" stroke-width="1.5"/>
      <text x="560" y="154" text-anchor="middle" fill="#94a3b8" font-size="8" font-family="monospace">U</text>

      <!-- Connection line: Actisense to T-connector -->
      <line x1="490" y1="180" x2="490" y2="230" stroke="#334155" stroke-width="2" stroke-dasharray="6 3"/>
      <polygon points="485,225 490,235 495,225" fill="#0ea5e9"/>

      <!-- T-Connector + Drop Cable -->
      <rect x="400" y="240" width="180" height="70" rx="10" fill="#1a2332" stroke="#1e3a5f" stroke-width="1.5"/>
      <text x="490" y="268" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="600" font-family="system-ui">T-Connector</text>
      <text x="490" y="288" text-anchor="middle" fill="#64748b" font-size="10" font-family="monospace">+ 1m drop cable</text>
      <!-- T-shape connector visual -->
      <line x1="400" y1="252" x2="395" y2="252" stroke="#1e3a5f" stroke-width="3"/>
      <line x1="580" y1="252" x2="585" y2="252" stroke="#1e3a5f" stroke-width="3"/>

      <!-- Connection line: T-connector to NMEA backbone -->
      <line x1="490" y1="310" x2="490" y2="335" stroke="#1e3a5f" stroke-width="3"/>
      <text x="490" y="330" text-anchor="middle" fill="#1e3a5f" font-size="10" font-weight="700" font-family="monospace">&darr; NMEA 2000 BACKBONE</text>

      <!-- Power adapter -->
      <rect x="660" y="60" width="200" height="100" rx="12" fill="#1a2332" stroke="#f59e0b" stroke-width="1.5" filter="url(#glow-orange)"/>
      <text x="760" y="92" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="700" font-family="system-ui">Power Adapter</text>
      <text x="760" y="112" text-anchor="middle" fill="#64748b" font-size="10" font-family="monospace">12V DC or 110/220V AC</text>
      <text x="760" y="130" text-anchor="middle" fill="#f59e0b" font-size="10" font-family="monospace">&rarr; 5V USB-C out</text>

      <!-- Connection line: Power to Case -->
      <path d="M660,110 L350,110 L350,307 L130,307" fill="none" stroke="#f59e0b" stroke-width="1.5" stroke-dasharray="6 3"/>
      <polygon points="135,302 125,307 135,312" fill="#f59e0b"/>

      <!-- Internet connection (WiFi icon area) -->
      <rect x="660" y="200" width="200" height="80" rx="12" fill="#1a2332" stroke="#334155" stroke-width="1.5"/>
      <text x="760" y="232" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="700" font-family="system-ui">Internet Source</text>
      <text x="760" y="252" text-anchor="middle" fill="#64748b" font-size="10" font-family="monospace">Starlink &bull; WiFi &bull; Hotspot</text>
      <text x="760" y="268" text-anchor="middle" fill="#475569" font-size="9" font-family="monospace">auto-connects via VPN</text>

      <!-- WiFi waves visual -->
      <path d="M730,205 Q735,198 740,205" fill="none" stroke="#94a3b8" stroke-width="1" opacity="0.5"/>
      <path d="M725,200 Q735,190 745,200" fill="none" stroke="#94a3b8" stroke-width="1" opacity="0.4"/>
      <path d="M720,195 Q735,182 750,195" fill="none" stroke="#94a3b8" stroke-width="1" opacity="0.3"/>
    </svg>
  </div>

  <div class="puck-layout">
    <div class="puck-kit">
      <h3>What's in the Box</h3>
      <ul>
        <li>Raspberry Pi 5 in waterproof case <span>~$80</span></li>
        <li>Actisense NGX-1 (NMEA 2000 USB) <span>~$200</span></li>
        <li>NMEA 2000 T-connector + 1m drop cable <span>~$30</span></li>
        <li>USB-C power adapter (12V DC or AC outlet) <span>~$15</span></li>
        <li>Quick start card (4 steps, with pictures) <span></span></li>
      </ul>
      <p class="puck-total">Total hardware: ~$325</p>
    </div>

    <div class="puck-setup">
      <h3>Captain's Setup: 60 Seconds</h3>
      <div class="puck-steps">
        <div class="puck-step">
          <span>1</span>
          <p>Plug the NMEA 2000 cable into any open T-connector on the backbone</p>
        </div>
        <div class="puck-step">
          <span>2</span>
          <p>Plug the USB-C power into any 12V outlet or AC socket</p>
        </div>
        <div class="puck-step">
          <span>3</span>
          <p>Wait for the green light (60 seconds)</p>
        </div>
        <div class="puck-step">
          <span>4</span>
          <p>Log into the Commander App on your phone &mdash; your boat appears automatically</p>
        </div>
      </div>
      <p class="puck-note">No configuration needed. Plug into any internet source &mdash; Starlink, marina WiFi, or hotspot. Master starts receiving data automatically via VPN Tunnel.</p>
    </div>
  </div>

  <div class="puck-chain">
    <h3>How Data Flows</h3>
    <div class="chain-flow">
      <div class="chain-node"><span class="chain-icon">&#x2693;</span><span class="chain-label">NMEA 2000</span></div>
      <span class="chain-arrow">&rarr;</span>
      <div class="chain-node"><span class="chain-icon">&#x1F50C;</span><span class="chain-label">Actisense USB</span></div>
      <span class="chain-arrow">&rarr;</span>
      <div class="chain-node"><span class="chain-icon">&#x1F4BB;</span><span class="chain-label">Raspberry Pi</span></div>
      <span class="chain-arrow">&rarr;</span>
      <div class="chain-node"><span class="chain-icon">&#x1F4F6;</span><span class="chain-label">Internet</span></div>
      <span class="chain-arrow">&rarr;</span>
      <div class="chain-node"><span class="chain-icon">&#x1F510;</span><span class="chain-label">VPN Tunnel</span></div>
      <span class="chain-arrow">&rarr;</span>
      <div class="chain-node"><span class="chain-icon">&#x2601;&#xFE0F;</span><span class="chain-label">Master Cloud</span></div>
      <span class="chain-arrow">&rarr;</span>
      <div class="chain-node"><span class="chain-icon">&#x1F4AC;</span><span class="chain-label">WhatsApp</span></div>
    </div>
  </div>

  <div class="puck-uses">
    <div class="puck-use">
      <div class="puck-use-icon">&#x1F6A2;</div>
      <h4>Delivery Monitoring</h4>
      <p>Owner tracks their boat in real-time during delivery passages. Position, engine health, fuel, ETA &mdash; all via WhatsApp. Captain plugs it in, owner gets updates. No crew involvement needed.</p>
    </div>
    <div class="puck-use">
      <div class="puck-use-icon">&#x2693;</div>
      <h4>Marina Management</h4>
      <p>Deploy pucks across slips to monitor every vessel. Shore power status, bilge activity, battery health, security alerts. Automate dock walks and catch problems before owners call.</p>
    </div>
    <div class="puck-use">
      <div class="puck-use-icon">&#x2744;&#xFE0F;</div>
      <h4>Seasonal Storage</h4>
      <p>Leave the puck plugged in while your boat sits on the hard or at a winter slip. Battery, bilge, and temperature alerts via cellular &mdash; even 1,000 miles away.</p>
    </div>
  </div>
</section>

<!-- Commander Diagnostic -->
<section id="diagnostics">
  <div class="section-header">
    <h2>Commander Diagnostic</h2>
    <p>Portable diagnostic scanning for marine professionals. Plug into any boat, scan for 24&ndash;48 hours, deliver a comprehensive report.</p>
  </div>

  <div class="diag-layout">
    <div class="diag-steps">
      <h3>How It Works</h3>
      <div class="diag-step">
        <span>1</span>
        <p><strong>Plug In</strong> &mdash; Connect the Diagnostic Scanner to any open T-connector on the boat's NMEA 2000 backbone. Same 60-second setup as the Delivery Puck.</p>
      </div>
      <div class="diag-step">
        <span>2</span>
        <p><strong>Scan 24&ndash;48h</strong> &mdash; The scanner runs Auto-Discovery, then deep analysis. It captures full operating patterns &mdash; charging cycles, parasitic draw, intermittent faults, and usage data a short test would miss.</p>
      </div>
      <div class="diag-step">
        <span>3</span>
        <p><strong>Get Report</strong> &mdash; Data uploads to Master Cloud. You receive a comprehensive diagnostic report on the Service Portal &mdash; network map, anomaly flags, benchmarks, and maintenance recommendations.</p>
      </div>
    </div>

    <div class="diag-report">
      <h3>What You Get</h3>
      <ul>
        <li><strong>Network topology map</strong> &mdash; every device on the backbone, what's connected, what's missing, address conflicts</li>
        <li><strong>Battery health &amp; charging patterns</strong> &mdash; state of health, parasitic draw, charging efficiency, depth of discharge cycles</li>
        <li><strong>Engine hours, error codes, maintenance flags</strong> &mdash; coolant trends, oil pressure patterns, alternator output analysis</li>
        <li><strong>Sensor anomaly detection</strong> &mdash; out-of-spec readings, intermittent connections, phantom sensors, data gaps</li>
        <li><strong>Comparison benchmarks</strong> &mdash; how this boat compares to others in its class for battery, fuel, engine, and overall system health</li>
      </ul>
    </div>
  </div>

  <div class="diag-uses">
    <div class="diag-use">
      <div class="diag-use-icon">&#x1F527;</div>
      <h4>Pre-Service Diagnostics</h4>
      <p>Drop the scanner on the boat before you visit. Know exactly what's wrong, what tools and parts to bring, and show up prepared. No more wasted trips.</p>
    </div>
    <div class="diag-use">
      <div class="diag-use-icon">&#x1F4CA;</div>
      <h4>Annual Health Check</h4>
      <p>Offer boat owners an annual "heartbeat" scan. 48 hours of continuous monitoring reveals trends, degradation, and maintenance items they can't see on a sea trial.</p>
    </div>
    <div class="diag-use">
      <div class="diag-use-icon">&#x1F4C4;</div>
      <h4>Insurance Surveys</h4>
      <p>Verified monitoring data for marine underwriting. Continuous sensor logs, network health, and system benchmarks &mdash; professional documentation, not estimates.</p>
    </div>
    <div class="diag-use">
      <div class="diag-use-icon">&#x1F9ED;</div>
      <h4>Marine Surveys</h4>
      <p>Surveyors plug in the scanner during pre-purchase or condition inspections. 48 hours of continuous data backs up the visual survey with verified sensor readings, engine analysis, and electrical system health &mdash; turning a subjective report into an evidence-based assessment.</p>
    </div>
  </div>
</section>

<!-- Also Built For -->
<section id="also-built-for">
  <div class="section-header">
    <h2>Also Built For</h2>
    <p>Commander adapts to specialized marine operations.</p>
  </div>
  <div class="ribbon-grid">
    <div class="ribbon-card">
      <div class="ribbon-icon">&#x1F4C4;</div>
      <h4>Marine Insurance</h4>
      <div class="ribbon-count">4 USE CASES</div>
      <p>Verified monitoring data for claims. Continuous engine logs, GPS tracks, and maintenance records reduce risk profiles.</p>
    </div>
    <div class="ribbon-card" style="cursor:pointer" onclick="document.getElementById('diagnostics').scrollIntoView({behavior:'smooth'})">
      <div class="ribbon-icon">&#x1F527;</div>
      <h4>Marine Professionals</h4>
      <div class="ribbon-count">14 USE CASES</div>
      <p>Portable diagnostic scanning for marine technicians. Plug into any boat, scan 24&ndash;48h, deliver a professional report via the Service Portal.</p>
    </div>
  </div>
</section>

<!-- Hardware Comparison -->
<section id="hardware">
  <div class="section-header">
    <h2>Choose Your Hardware</h2>
    <p>Four Commander Unit options &mdash; matched to how you use your boat.</p>
  </div>
  <div class="hw-grid">
    <div class="hw-card">
      <span class="hw-badge">Charter Fleets</span>
      <h3>Raspberry Pi</h3>
      <svg viewBox="0 0 320 80" class="hw-diagram" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="18" width="80" height="44" rx="6" fill="#0f172a" stroke="#22c55e" stroke-width="1"/>
        <text x="40" y="36" text-anchor="middle" fill="#22c55e" font-size="8" font-weight="600">Raspberry Pi 5</text>
        <text x="40" y="50" text-anchor="middle" fill="#64748b" font-size="7">SignalK built-in</text>
        <line x1="80" y1="40" x2="100" y2="40" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="100" y="18" width="65" height="44" rx="6" fill="#0f172a" stroke="#0ea5e9" stroke-width="1"/>
        <text x="132" y="36" text-anchor="middle" fill="#0ea5e9" font-size="8" font-weight="600">Actisense</text>
        <text x="132" y="50" text-anchor="middle" fill="#64748b" font-size="7">NMEA &rarr; USB</text>
        <line x1="165" y1="40" x2="185" y2="40" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="185" y="18" width="55" height="44" rx="6" fill="#0f172a" stroke="#334155" stroke-width="1"/>
        <text x="212" y="36" text-anchor="middle" fill="#94a3b8" font-size="8" font-weight="600">Internet</text>
        <text x="212" y="50" text-anchor="middle" fill="#64748b" font-size="7">WiFi/Starlink</text>
        <line x1="240" y1="40" x2="260" y2="40" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="260" y="18" width="55" height="44" rx="6" fill="#0f172a" stroke="#7c3aed" stroke-width="1"/>
        <text x="287" y="36" text-anchor="middle" fill="#a78bfa" font-size="8" font-weight="600">Master</text>
        <text x="287" y="50" text-anchor="middle" fill="#64748b" font-size="7">Cloud AI</text>
        <text x="40" y="12" text-anchor="middle" fill="#475569" font-size="7">&darr; NMEA 2000</text>
      </svg>
      <p class="hw-desc">Compact, always-on, and built for fleets. Cloud AI processing via internet &mdash; no local model needed.</p>
      <ul>
        <li>Compact form factor &mdash; fits anywhere</li>
        <li>Low power draw (5W)</li>
        <li>Always-on internet required</li>
        <li>Cloud AI via Master subscription</li>
        <li>OTA updates &amp; remote management</li>
      </ul>
    </div>
    <div class="hw-card">
      <span class="hw-badge">Delivery &amp; Marinas</span>
      <h3>Delivery Puck</h3>
      <svg viewBox="0 0 320 80" class="hw-diagram" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="8" width="100" height="55" rx="6" fill="#0f172a" stroke="#0ea5e9" stroke-width="1"/>
        <text x="50" y="22" text-anchor="middle" fill="#0ea5e9" font-size="7" font-weight="600">WATERPROOF CASE</text>
        <rect x="8" y="28" width="84" height="28" rx="4" fill="#111827" stroke="#22c55e" stroke-width="0.8"/>
        <text x="50" y="40" text-anchor="middle" fill="#22c55e" font-size="7" font-weight="600">Pi 5 + SignalK</text>
        <text x="50" y="52" text-anchor="middle" fill="#64748b" font-size="6">Actisense NGX-1</text>
        <line x1="100" y1="36" x2="120" y2="36" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="120" y="18" width="55" height="44" rx="6" fill="#0f172a" stroke="#334155" stroke-width="1"/>
        <text x="147" y="36" text-anchor="middle" fill="#94a3b8" font-size="8" font-weight="600">Internet</text>
        <text x="147" y="50" text-anchor="middle" fill="#64748b" font-size="7">Any source</text>
        <line x1="175" y1="36" x2="195" y2="36" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="195" y="18" width="55" height="44" rx="6" fill="#0f172a" stroke="#7c3aed" stroke-width="1"/>
        <text x="222" y="36" text-anchor="middle" fill="#a78bfa" font-size="8" font-weight="600">Master</text>
        <text x="222" y="50" text-anchor="middle" fill="#64748b" font-size="7">Cloud</text>
        <line x1="250" y1="36" x2="270" y2="36" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="270" y="18" width="45" height="44" rx="6" fill="#0f172a" stroke="#1a5c38" stroke-width="1"/>
        <text x="292" y="36" text-anchor="middle" fill="#22c55e" font-size="7" font-weight="600">WhatsApp</text>
        <text x="292" y="49" text-anchor="middle" fill="#64748b" font-size="6">+ App</text>
        <text x="50" y="76" text-anchor="middle" fill="#f59e0b" font-size="7">&uarr; NMEA 2000 backbone</text>
      </svg>
      <p class="hw-desc">Plug-and-play monitoring. Internet required &mdash; Starlink, marina WiFi, or hotspot. Ideal for deliveries, marinas, and seasonal storage.</p>
      <ul>
        <li>Raspberry Pi 5 + Actisense NGX-1</li>
        <li>Internet required (Starlink, WiFi, hotspot)</li>
        <li>Pre-provisioned VPN Tunnel</li>
        <li>60-second setup &mdash; plug in and go</li>
        <li>Store &amp; forward when offline</li>
        <li>~$325 hardware</li>
      </ul>
    </div>
    <div class="hw-card">
      <span class="hw-badge">Private Yachts</span>
      <h3>Mac Mini M4</h3>
      <svg viewBox="0 0 320 90" class="hw-diagram" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="18" width="90" height="50" rx="6" fill="#0f172a" stroke="#22c55e" stroke-width="1"/>
        <text x="45" y="34" text-anchor="middle" fill="#22c55e" font-size="8" font-weight="600">Mac Mini M4</text>
        <text x="45" y="46" text-anchor="middle" fill="#64748b" font-size="6.5">SignalK + AI Brain</text>
        <text x="45" y="58" text-anchor="middle" fill="#10b981" font-size="6">Qwen 14B local</text>
        <line x1="90" y1="43" x2="110" y2="43" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="110" y="18" width="65" height="50" rx="6" fill="#0f172a" stroke="#0ea5e9" stroke-width="1"/>
        <text x="142" y="34" text-anchor="middle" fill="#0ea5e9" font-size="8" font-weight="600">Actisense</text>
        <text x="142" y="46" text-anchor="middle" fill="#64748b" font-size="7">NMEA &rarr; USB</text>
        <text x="142" y="58" text-anchor="middle" fill="#64748b" font-size="6">+ Cameras</text>
        <!-- Two paths out -->
        <line x1="90" y1="28" x2="205" y2="10" stroke="#334155" stroke-width="1" stroke-dasharray="4 2"/>
        <rect x="205" y="0" width="60" height="32" rx="5" fill="#0f172a" stroke="#334155" stroke-width="0.8"/>
        <text x="235" y="13" text-anchor="middle" fill="#94a3b8" font-size="7" font-weight="600">WiFi / BLE</text>
        <text x="235" y="24" text-anchor="middle" fill="#64748b" font-size="6">On-board</text>
        <line x1="265" y1="16" x2="280" y2="16" stroke="#334155" stroke-width="1" stroke-dasharray="4 2"/>
        <rect x="280" y="4" width="38" height="24" rx="5" fill="#0f172a" stroke="#0e4a2f" stroke-width="0.8"/>
        <text x="299" y="20" text-anchor="middle" fill="#10b981" font-size="7" font-weight="600">App</text>
        <line x1="90" y1="58" x2="205" y2="70" stroke="#334155" stroke-width="1" stroke-dasharray="4 2"/>
        <rect x="205" y="55" width="60" height="32" rx="5" fill="#0f172a" stroke="#374151" stroke-width="0.8"/>
        <text x="235" y="68" text-anchor="middle" fill="#94a3b8" font-size="7" font-weight="600">Internet</text>
        <text x="235" y="79" text-anchor="middle" fill="#64748b" font-size="6">Optional</text>
        <line x1="265" y1="71" x2="280" y2="71" stroke="#334155" stroke-width="1" stroke-dasharray="4 2"/>
        <rect x="280" y="59" width="38" height="24" rx="5" fill="#0f172a" stroke="#7c3aed" stroke-width="0.8"/>
        <text x="299" y="74" text-anchor="middle" fill="#a78bfa" font-size="6.5" font-weight="600">Cloud</text>
        <text x="45" y="12" text-anchor="middle" fill="#475569" font-size="7">&darr; NMEA 2000</text>
      </svg>
      <p class="hw-desc">Full power for private owners. Runs AI locally with Qwen 14B &mdash; works completely offline.</p>
      <ul>
        <li>Apple M4 chip &mdash; runs local AI</li>
        <li>Qwen 14B language model on device</li>
        <li>Works fully offline &mdash; no internet needed</li>
        <li>AI Vision for cameras &amp; FLIR</li>
        <li>Optional Master Cloud subscription</li>
      </ul>
    </div>
    <div class="hw-card">
      <span class="hw-badge" style="background:rgba(245,158,11,0.1);border-color:rgba(245,158,11,0.2);color:var(--orange)">Marine Professionals</span>
      <h3>Diagnostic Scanner</h3>
      <svg viewBox="0 0 320 80" class="hw-diagram" xmlns="http://www.w3.org/2000/svg">
        <rect x="0" y="8" width="100" height="55" rx="6" fill="#0f172a" stroke="#f59e0b" stroke-width="1"/>
        <text x="50" y="22" text-anchor="middle" fill="#f59e0b" font-size="7" font-weight="600">PORTABLE SCANNER</text>
        <rect x="8" y="28" width="84" height="28" rx="4" fill="#111827" stroke="#22c55e" stroke-width="0.8"/>
        <text x="50" y="40" text-anchor="middle" fill="#22c55e" font-size="7" font-weight="600">Pi 5 + SignalK</text>
        <text x="50" y="52" text-anchor="middle" fill="#64748b" font-size="6">Actisense NGX-1</text>
        <line x1="100" y1="36" x2="120" y2="36" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="120" y="18" width="55" height="44" rx="6" fill="#0f172a" stroke="#334155" stroke-width="1"/>
        <text x="147" y="36" text-anchor="middle" fill="#94a3b8" font-size="8" font-weight="600">Internet</text>
        <text x="147" y="50" text-anchor="middle" fill="#64748b" font-size="7">Upload</text>
        <line x1="175" y1="36" x2="195" y2="36" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="195" y="18" width="55" height="44" rx="6" fill="#0f172a" stroke="#7c3aed" stroke-width="1"/>
        <text x="222" y="36" text-anchor="middle" fill="#a78bfa" font-size="8" font-weight="600">Master</text>
        <text x="222" y="50" text-anchor="middle" fill="#64748b" font-size="7">Analysis</text>
        <line x1="250" y1="36" x2="270" y2="36" stroke="#334155" stroke-width="1.5" stroke-dasharray="4 2"/>
        <rect x="270" y="18" width="48" height="44" rx="6" fill="#0f172a" stroke="#f59e0b" stroke-width="1"/>
        <text x="294" y="33" text-anchor="middle" fill="#f59e0b" font-size="7" font-weight="600">Service</text>
        <text x="294" y="46" text-anchor="middle" fill="#f59e0b" font-size="7" font-weight="600">Portal</text>
        <text x="50" y="76" text-anchor="middle" fill="#f59e0b" font-size="7">&uarr; NMEA 2000 backbone</text>
      </svg>
      <p class="hw-desc">Same hardware as the Delivery Puck, configured for portable diagnostic scans. Moves between boats &mdash; plug in, scan, retrieve.</p>
      <ul>
        <li>Raspberry Pi 5 + Actisense NGX-1</li>
        <li>Portable &mdash; moves between boats</li>
        <li>24&ndash;48 hour deep analysis scans</li>
        <li>Internet required for report upload</li>
        <li>Service Portal for diagnostic reports</li>
        <li>Per-scan or subscription pricing</li>
      </ul>
    </div>
  </div>

  <!-- Add-On Module -->
  <div class="addon-card">
    <div class="addon-header">
      <span class="hw-badge" style="background:rgba(14,165,233,0.1);border-color:rgba(14,165,233,0.2);color:var(--cyan)">Add-On Module</span>
      <h3>Marine Camera System</h3>
      <p class="hw-desc">Marine-grade PoE cameras with two-way communication, night vision, and AI-powered monitoring. Works with Mac Mini M4 &mdash; all video processing happens on board.</p>
    </div>
    <div class="addon-grid">
      <div class="addon-feature">
        <div class="uc-icon">&#x1F4F7;</div>
        <h4>PoE Cameras</h4>
        <p>Marine-grade IP cameras powered over ethernet. One cable for power and data. Mount anywhere on deck, salon, or engine room.</p>
      </div>
      <div class="addon-feature">
        <div class="uc-icon">&#x1F50A;</div>
        <h4>Two-Way Audio</h4>
        <p>Built-in speaker and microphone on each camera. Talk to crew, guests, or dock hands remotely from your phone.</p>
      </div>
      <div class="addon-feature">
        <div class="uc-icon">&#x1F319;</div>
        <h4>Night Vision</h4>
        <p>IR and color night vision for 24/7 monitoring. AI detects motion, people, and anomalies &mdash; processed locally on the Mac Mini.</p>
      </div>
      <div class="addon-feature">
        <div class="uc-icon">&#x1F4BE;</div>
        <h4>Local Storage</h4>
        <p>Video recorded to NVMe SSD connected to the Mac Mini. Weeks of continuous footage stored on board &mdash; no cloud fees, no bandwidth limits.</p>
      </div>
    </div>
  </div>
</section>

<!-- Pricing -->
<section id="pricing">
  <div class="section-header">
    <h2>Pricing</h2>
    <p>Simple, transparent pricing. No hidden fees.</p>
  </div>
  <div class="pricing-grid">
    <div class="price-card">
      <span class="price-badge">Most Popular</span>
      <h3>Charter Fleet</h3>
      <div class="price-amount">Custom <span class="price-period">per fleet</span></div>
      <p class="price-desc">Tailored to your fleet size and hardware choice. Pi or Mac Mini &mdash; we build the right solution.</p>
      <ul>
        <li>Commander Unit (Raspberry Pi)</li>
        <li>Professional installation</li>
        <li>Master Cloud &mdash; fleet dashboard</li>
        <li>WhatsApp alerts &amp; guest self-service</li>
        <li>OTA updates &amp; remote management</li>
        <li>Cross-fleet analytics</li>
        <li>Maintenance scheduling</li>
        <li>Compliance reporting</li>
        <li>FleetMind &mdash; shared intelligence</li>
      </ul>
    </div>
    <div class="price-card">
      <span class="price-badge">Plug &amp; Play</span>
      <h3>Delivery Puck</h3>
      <div class="price-amount">~$325 <span class="price-period">one-time hardware</span></div>
      <p class="price-desc">Buy or rent for deliveries, marina monitoring, or seasonal storage.</p>
      <ul>
        <li>Raspberry Pi 5 + Actisense NGX-1</li>
        <li>Pre-configured &mdash; zero setup</li>
        <li>Internet required (Starlink, WiFi, hotspot)</li>
        <li>VPN Tunnel &mdash; phones home automatically</li>
        <li>Master Cloud dashboard included</li>
        <li>WhatsApp updates to owner</li>
      </ul>
    </div>
    <div class="price-card">
      <span class="price-badge">Flexible</span>
      <h3>Private Yacht</h3>
      <div class="price-amount">Custom</div>
      <p class="price-desc">Tailored to your vessel and needs.</p>
      <ul>
        <li>Commander Unit (Mac Mini M4)</li>
        <li>Professional installation</li>
        <li>Local AI &mdash; works offline</li>
        <li>WhatsApp alerts &mdash; no subscription</li>
        <li>Commander App for on-board access</li>
        <li>Optional Master Cloud add-on</li>
      </ul>
    </div>
    <div class="price-card">
      <span class="price-badge" style="background:rgba(245,158,11,0.1);border-color:rgba(245,158,11,0.2);color:var(--orange)">Per Scan</span>
      <h3>Commander Diagnostic</h3>
      <div class="price-amount">$75 <span class="price-period">/ scan</span></div>
      <p class="price-desc">Per-scan fee &mdash; pass the cost to the boat owner. Or go unlimited.</p>
      <ul>
        <li>Comprehensive diagnostic report</li>
        <li>Network topology map</li>
        <li>Anomaly flags &amp; maintenance items</li>
        <li>Comparison benchmarks vs. boat class</li>
        <li>Dedicated Service Portal</li>
        <li>Share reports with boat owners</li>
        <li>Alt: $149/mo unlimited scans</li>
      </ul>
    </div>
  </div>
  <div class="pricing-cta-row">
    <button class="cta-btn" onclick="document.getElementById('chat-toggle').click()">Chat with Overlord Live</button>
    <a href="https://wa.me/13055601031?text=Hi%2C%20I'm%20interested%20in%20Master%26Commander" class="cta-btn secondary" target="_blank">Contact Us on WhatsApp</a>
  </div>
</section>

<!-- Features -->
<section id="features">
  <div class="section-header">
    <h2>Features</h2>
    <p>Everything you need to monitor your boat from anywhere.</p>
  </div>
  <div class="features">
    <div class="feature">
      <div class="feature-icon">&#x1F50D;</div>
      <h3>Auto-Discovery</h3>
      <p>Commander scans your NMEA 2000 network and learns what sensors YOUR boat has. No configuration files, no device lists. Adapts to any vessel automatically.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x1F4F1;</div>
      <h3>Commander App</h3>
      <p>Native app for iOS and Android. On board: connects directly via boat WiFi or Bluetooth &mdash; no internet required. Real-time gauges, alerts, camera feeds, and full command interface.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x1F6A8;</div>
      <h3>Smart Alerts</h3>
      <p>Rule-based alert engine &mdash; no AI, no hallucinations. Pure code monitoring thresholds 24/7. Battery, engines, bilge, anchor, depth, tanks.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x26A1;</div>
      <h3>Quick Commands</h3>
      <p>Instant responses for status, engines, battery, tanks, wind, anchor, and position. Pre-built templates, no AI latency.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x1F9E0;</div>
      <h3>AI Brain</h3>
      <p>Charter fleets use cloud AI via Master. Private yachts run Qwen 14B locally on Mac Mini M4 &mdash; fully offline. Ask about your boat in plain English.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x1F4F6;</div>
      <h3>Offline-First</h3>
      <p>Private yacht Commanders work with zero internet. Charter units need connectivity for cloud AI. Core monitoring and alerts always run locally.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x2693;</div>
      <h3>Anchor Watch</h3>
      <p>Set your swing radius and Commander monitors GPS drift continuously. If your anchor drags, you know immediately via WhatsApp.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x1F4F7;</div>
      <h3>Cameras &amp; FLIR</h3>
      <p>Security cameras, FLIR thermal imaging, and night vision. Monitor your vessel visually &mdash; on board or remotely. AI vision detects intrusions and thermal anomalies.</p>
    </div>
    <div class="feature">
      <div class="feature-icon">&#x1F310;</div>
      <h3>FleetMind</h3>
      <p>Every connected boat feeds the network. Crowdsourced wind, depth, anchorage intel, hazard alerts, and real-time passage conditions &mdash; shared across the fleet.</p>
    </div>
  </div>
</section>

<!-- FleetMind -->
<section id="fleetmind">
  <div class="section-header">
    <h2>FleetMind</h2>
    <p>Every Commander is a sensor. Master connects them into a shared intelligence network.</p>
  </div>

  <div class="fleetmind-hero">
    <h3>Your fleet is a <span>sensor mesh.</span></h3>
    <p>Every boat pushes real-time telemetry to Master &mdash; position, wind, depth, barometric pressure, sea state. FleetMind aggregates this data and pushes relevant insights back to every vessel in the network. No extra hardware. Pure cloud logic.</p>
  </div>

  <div class="fleetmind-grid">
    <div class="fm-card">
      <div class="fm-icon">&#x1F32C;&#xFE0F;</div>
      <h4>Live Wind Field</h4>
      <p>20 boats spread across the cruising ground, all reporting wind. FleetMind builds a real-time wind map &mdash; not forecast, actual measured conditions. "15kt gusts reported by 3 boats in the channel."</p>
    </div>
    <div class="fm-card">
      <div class="fm-icon">&#x1F30A;</div>
      <h4>Crowdsourced Depth</h4>
      <p>Every boat with a depth sounder is ground-truthing the chart. FleetMind aggregates depth readings + GPS into a live depth overlay. "Boat ahead of you just measured 4ft in that channel."</p>
    </div>
    <div class="fm-card">
      <div class="fm-icon">&#x2693;</div>
      <h4>Anchorage Intel</h4>
      <p>"5 boats currently at The Bight &mdash; average depth 22ft, wind 8kt east, all holding well." Charterers approaching an anchorage get real intel from boats already there.</p>
    </div>
    <div class="fm-card">
      <div class="fm-icon">&#x1F6A2;</div>
      <h4>Passage Conditions</h4>
      <p>A boat that just crossed a stretch reports sea state, current, and wind. The next boat heading that way gets a real-time heads-up &mdash; not a 6-hour-old forecast.</p>
    </div>
    <div class="fm-card">
      <div class="fm-icon">&#x26A0;&#xFE0F;</div>
      <h4>Hazard Broadcasts</h4>
      <p>One boat finds an uncharted obstruction, lobster pots, or debris. FleetMind broadcasts to all boats in the area automatically.</p>
    </div>
    <div class="fm-card">
      <div class="fm-icon">&#x1F326;&#xFE0F;</div>
      <h4>Weather Alerts</h4>
      <p>Master cross-references fleet positions against incoming weather cells. Boats in the path get proactive alerts &mdash; "Squall line approaching your position in 45 minutes."</p>
    </div>
  </div>

  <p class="fleetmind-note">FleetMind is included with all Master Cloud plans. Every connected boat makes the network smarter. Data is anonymized and opt-in.</p>
</section>

<!-- Alerts -->
<section id="alerts">
  <div class="section-header">
    <h2>Automatic Alerts</h2>
    <p>Alerts fire automatically via WhatsApp. No need to ask. All thresholds are configurable.</p>
  </div>
  <div class="table-wrap">
    <table class="alerts-table">
      <thead>
        <tr>
          <th></th>
          <th>Alert</th>
          <th>Trigger</th>
          <th>Requires</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="alert-icon">&#x1F50B;</td>
          <td>Battery Low</td>
          <td>SOC &lt; <code>20%</code></td>
          <td>Battery monitor</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x1F50B;</td>
          <td>Battery Critical</td>
          <td>SOC &lt; <code>10%</code></td>
          <td>Battery monitor</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x1F321;&#xFE0F;</td>
          <td>Engine Overheat</td>
          <td>Coolant &gt; <code>95&#176;C</code></td>
          <td>Engine sensors</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x1F6E2;&#xFE0F;</td>
          <td>Low Oil Pressure</td>
          <td>&lt; <code>25 PSI</code> while running</td>
          <td>Engine sensors</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x1F6B0;</td>
          <td>Bilge Pump</td>
          <td>&gt; <code>6 cycles</code> in 30 min</td>
          <td>Bilge pump counter</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x2693;</td>
          <td>Anchor Drag</td>
          <td>GPS drift &gt; <code>set radius</code></td>
          <td>GPS + anchor watch</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x1F30A;</td>
          <td>Shallow Water</td>
          <td>Depth &lt; <code>configured min</code></td>
          <td>Depth sounder</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x26FD;</td>
          <td>Low Fuel</td>
          <td>&lt; <code>15%</code></td>
          <td>Tank sensors</td>
        </tr>
        <tr>
          <td class="alert-icon">&#x1F4A7;</td>
          <td>Low Water</td>
          <td>&lt; <code>15%</code></td>
          <td>Tank sensors</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- WhatsApp Demo -->
<section id="demo">
  <div class="section-header">
    <h2>WhatsApp Demo</h2>
    <p>This is what it looks like. Real commands, real responses.</p>
  </div>
  <div class="wa-demo">
    <div class="wa-header">
      <div class="wa-avatar">&#x2693;</div>
      <div>
        <div class="wa-name">Commander</div>
        <div class="wa-status">online</div>
      </div>
    </div>
    <div class="wa-chat">
      <div class="wa-msg sent">status <span class="time">9:41</span></div>
      <div class="wa-msg recv"><pre>&#x2693; VESSEL STATUS

&#x1F4CD; Position
  18&#176;27.3'N  64&#176;37.1'W
  At anchor &mdash; Virgin Gorda

&#x2699;&#xFE0F; Engines
  Port:  OFF  (1,847 hrs)
  Stbd:  OFF  (1,832 hrs)

&#x1F50B; Battery
  House:  87%  25.4V  -2.1A
  Start:  100%  13.2V
  Solar:  +14.2A  (342W)

&#x26FD; Tanks
  Fuel:  72%  |  Water:  45%

&#x1F32C;&#xFE0F; Wind  8kt NE  |  Depth 28ft</pre><span class="time">9:41</span></div>
      <div class="wa-msg sent">anything I should worry about? <span class="time">9:42</span></div>
      <div class="wa-msg recv">Looking good overall. Water tanks are at 45% &mdash; if you're staying at anchor a few more days, you might want to top up at the marina. Everything else is in normal range. Solar is keeping up with house loads, engines haven't been run today.<span class="time">9:42</span></div>
      <div class="wa-msg sent">anchor <span class="time">14:30</span></div>
      <div class="wa-msg recv"><pre>&#x2693; ANCHOR WATCH

  Status:  SET &mdash; holding
  Radius:  45m set  |  12m current
  Drift:   0.3m in last hour
  GPS:     18&#176;27.342'N  64&#176;37.089'W
  Depth:   28ft  (stable)</pre><span class="time">14:30</span></div>
    </div>
  </div>
</section>

<!-- Master Cloud -->
<section id="master">
  <div class="section-header">
    <h2>Master Cloud</h2>
    <p>Included with every charter fleet plan. Optional subscription for private yacht owners. Commander works standalone &mdash; Master adds cloud power.</p>
  </div>
  <div class="fleet-grid">
    <div class="fleet-card">
      <span class="fleet-badge">REMOTE MANAGEMENT</span>
      <h3>Over-the-Air Updates</h3>
      <p>Master manages your Commander Units remotely. Software updates, alert tuning, sensor calibration &mdash; all handled over the air.</p>
    </div>
    <div class="fleet-card">
      <span class="fleet-badge">ANALYTICS</span>
      <h3>Historical Data &amp; Insights</h3>
      <p>Cloud-stored telemetry history. Trend analysis, seasonal comparisons, maintenance predictions. Your boats get smarter over time.</p>
    </div>
    <div class="fleet-card">
      <span class="fleet-badge">DASHBOARD</span>
      <h3>Web Dashboard &amp; Push Alerts</h3>
      <p>Full web dashboard from any browser &mdash; live telemetry, historical charts, camera feeds. Push notifications for critical alerts.</p>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta" id="contact">
  <h2>Ready to monitor your fleet?</h2>
  <p>Commander is currently in development. Get in touch to learn more or join the early access program.</p>
  <div class="cta-buttons">
    <a href="https://wa.me/13055601031?text=Hi%2C%20I'm%20interested%20in%20Master%26Commander%20for%20my%20charter%20fleet" class="cta-btn" target="_blank">Chat on WhatsApp</a>
    <a href="https://wa.me/13055601031?text=Hi%2C%20I'm%20interested%20in%20Master%26Commander%20for%20my%20private%20yacht" class="cta-btn secondary" target="_blank">Private Yacht Inquiry</a>
  </div>
</section>

<!-- Footer -->
<footer>
  <p>&copy; 2026 Master&amp;Commander &mdash; AI boat monitoring for charter fleets and private yachts.</p>
</footer>

<script src="flow.js"></script>
<script>
// Tab switching
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const tab = btn.dataset.tab;
    // Deactivate all tabs and panels
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
    // Activate selected
    btn.classList.add('active');
    document.getElementById('tab-' + tab).classList.add('active');
    // Auto-click first pill in newly active tab
    const firstPill = document.querySelector('#tab-' + tab + ' .pill-btn');
    if (firstPill && !firstPill.classList.contains('active')) firstPill.click();
  });
});

// Pill switching (scoped to parent tab)
document.querySelectorAll('.pill-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const pill = btn.dataset.pill;
    const tabPanel = btn.closest('.tab-panel');
    // Deactivate pills and panels within this tab
    tabPanel.querySelectorAll('.pill-btn').forEach(b => b.classList.remove('active'));
    tabPanel.querySelectorAll('.pill-panel').forEach(p => p.classList.remove('active'));
    // Activate selected
    btn.classList.add('active');
    document.getElementById('pill-' + pill).classList.add('active');
  });
});

// Hardware cards  scroll to pricing
document.querySelectorAll('.hw-card').forEach(card => {
  card.addEventListener('click', () => {
    document.getElementById('pricing').scrollIntoView({ behavior: 'smooth' });
  });
});

// Pricing cards  trigger email link on card click
document.querySelectorAll('.price-card').forEach(card => {
  card.addEventListener('click', (e) => {
    if (e.target.closest('a')) return; // don't double-trigger if clicking the button
    const link = card.querySelector('a.cta-btn');
    if (link) link.click();
  });
});
</script>

<!-- Chat Widget -->
<button class="chat-bubble" id="chat-toggle" aria-label="Open chat">
  &#x2693;
  <span class="bubble-badge"></span>
</button>

<div class="chat-window" id="chat-window">
  <div class="chat-window-header">
    <div class="chat-avatar">&#x2693;</div>
    <div class="chat-info">
      <h4>Commander</h4>
      <span>Online</span>
    </div>
    <button class="chat-window-close" id="chat-close">&times;</button>
  </div>
  <div class="chat-messages" id="chat-messages">
    <div class="chat-msg bot">Hi! I'm the Master&amp;Commander assistant. Ask me anything about our boat monitoring system, pricing, or hardware options.</div>
  </div>
  <div class="chat-input-area">
    <input type="text" id="chat-input" placeholder="Ask about pricing, hardware, features..." maxlength="1000" autocomplete="off">
    <button id="chat-send">&#x27A4;</button>
  </div>
</div>

<script>
(function() {
  const toggle = document.getElementById('chat-toggle');
  const win = document.getElementById('chat-window');
  const closeBtn = document.getElementById('chat-close');
  const input = document.getElementById('chat-input');
  const sendBtn = document.getElementById('chat-send');
  const messages = document.getElementById('chat-messages');
  let sessionId = null;
  let sending = false;

  toggle.addEventListener('click', () => {
    win.classList.toggle('open');
    if (win.classList.contains('open')) input.focus();
  });
  closeBtn.addEventListener('click', () => win.classList.remove('open'));

  function addMessage(text, cls) {
    const div = document.createElement('div');
    div.className = 'chat-msg ' + cls;
    div.textContent = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
    return div;
  }

  async function send() {
    const text = input.value.trim();
    if (!text || sending) return;
    sending = true;
    sendBtn.disabled = true;
    input.value = '';

    addMessage(text, 'user');
    const typing = addMessage('Thinking...', 'typing');

    try {
      const res = await fetch('/api/web-chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: text, sessionId })
      });
      const data = await res.json();
      typing.remove();
      if (data.error) {
        addMessage(data.error, 'bot');
      } else {
        sessionId = data.sessionId;
        addMessage(data.response, 'bot');
      }
    } catch (err) {
      typing.remove();
      addMessage('Connection error. Please try again.', 'bot');
    }
    sending = false;
    sendBtn.disabled = false;
    input.focus();
  }

  sendBtn.addEventListener('click', send);
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); }
  });
})();
</script>
</body>
</html>
